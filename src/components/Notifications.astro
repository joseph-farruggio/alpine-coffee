<div x-data="notifications" class="fixed right-3 bottom-3 flex flex-col gap-y-4 w-80" @order-complete.window="push($event.detail)">
    <template x-for="order in notifications" :key="order.id">
        <div 
            x-show="!order.deleted" 
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 transform translate-x-20 scale-90"
            x-transition:enter-end="opacity-100 transform translate-x-0 scale-100"
            x-transition:leave="transition ease-in duration-300"
            x-transition:leave-start="opacity-100 transform translate-x-0 scale-100"
            x-transition:leave-end="opacity-0 transform translate-x-20 scale-90"
            class="bg-cyan-400/10 text-cyan-300 px-2 py-1 rounded-lg ring-1 ring-instet ring-cyan-400/30" x-text="`${order.customer}, your ${order.title.toLowerCase()} is ready.`"></div>  
    </template>
</div>
<script>
    import Alpine from 'alpinejs'

    Alpine.data('notifications', () => ({
        notifications: [],
        push(order) {
            order.deleted = false
            this.notifications.push(order)
            
            setTimeout( function() {
                this.notifications.find(o => o.id === order.id).deleted = true
            }.bind(this), 2500)
        }
    }))
</script>